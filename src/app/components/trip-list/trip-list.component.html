<div *ngIf="!isLoggedIn">
    <app-no-access></app-no-access>
</div>
<div *ngIf="isLoggedIn">
    <div class = "row h2 my-4 text-center">
        <p>Список рейсов</p>
    </div>
    <div class="row">
        <div class="col text-start">
            <button (click)="navigateAdd()" class="btn btn-primary mb-1">Добавить</button>
        </div>
        <div class="col-3 text-end">
            <input type="text" class="form-control" placeholder="Поиск" (keyup)="applyFilter($event)">
        </div>
    </div>
    <table class = "table table-striped table-bordered table-hover align-middle text-center mb-1 shadow-lg bg-white">
        <thead>
            <tr>
                <th><a id="routeByRouteId.routeId" (click)="applySortTest($event)">Номер</a></th>
                <th><a id="routeByRouteId.routeName" (click)="applySortTest($event)">Название</a></th>
                <th><a id="depTime" (click)="applySortTest($event)">Дата отправления</a></th>
                <th><a id="userByUserId.lastName" (click)="applySortTest($event)">Водитель</a></th>
                <th><a id="busByBusId.busModel" (click)="applySortTest($event)">Автобус</a></th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor = "let trip of trips" >
                <td> {{ trip.routeByRouteId.routeId }} </td>
                <td> {{ trip.routeByRouteId.routeName }} </td>
                <td> {{ trip.depTime | date:'dd.MM.yyyy HH:mm:ss':'UTC +3'}} </td>
                <td> {{ trip.userByUserId.lastName + ' ' + trip.userByUserId.firstName + ' ' + trip.userByUserId.surName }} </td>
                <td> {{ trip.busByBusId.busModel + ' ' + trip.busByBusId.number }} </td>
                <td>
                    <button (click) = "navigateUpdate(trip.tripId)" class = "btn btn-primary">Изменить</button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="row">
        <div class="col">
            
        </div>
        <div class="col-3 text-end">
            <button (click) = "saveTable()" class = "btn btn-primary">Экспорт</button>
        </div>
    </div>
</div>